<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Email me form</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      /* Light theme */
      --bg:#fbfaf6;
      --surface:#ffffff;
      --text:#1c2430;
      --muted:#4a5a6a;
      --border:#cfd8e3;
      --accent:#2b6a78;
      --accent2:#6b4f86;
      --focus:#0b5fff;
      --shadow: 0 10px 30px rgba(17, 24, 39, .08);
      --radius: 16px;

      --gap-1: 10px;
      --gap-2: 16px;
      --gap-3: 22px;
      --gap-4: 30px;

      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --base: 19px;
      --line: 1.55;
    }

    [data-theme="dark"]{
      --bg:#101418;
      --surface:#151b22;
      --text:#f3f6fb;
      --muted:#c3cfdb;
      --border:#2a3440;
      --accent:#6dd3e5;
      --accent2:#c9a3ff;
      --focus:#8ab4ff;
      --shadow: 0 10px 30px rgba(0, 0, 0, .35);
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin:0;
      font-family: var(--font);
      font-size: var(--base);
      line-height: var(--line);
      color: var(--text);
      background: radial-gradient(1200px 600px at 15% 0%, rgba(43,106,120,.10), transparent 55%),
                  radial-gradient(1200px 600px at 85% 0%, rgba(107,79,134,.10), transparent 55%),
                  var(--bg);
    }

    a{
      color: var(--accent);
      text-decoration: underline;
      text-underline-offset: 3px;
    }
    a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
      border-radius: 10px;
    }

    .skip-link{
      position:absolute;
      left:-999px;
      top:0;
      background: var(--surface);
      color: var(--text);
      border: 2px solid var(--focus);
      padding: 12px 14px;
      border-radius: 12px;
      z-index: 9999;
    }
    .skip-link:focus{
      left: 12px;
      top: 12px;
    }

    header{
      position: sticky;
      top: 0;
      backdrop-filter: blur(10px);
      background: color-mix(in oklab, var(--bg) 78%, transparent);
      border-bottom: 1px solid color-mix(in oklab, var(--border) 65%, transparent);
      z-index: 20;
    }

    .wrap{
      width: min(860px, calc(100% - 32px));
      margin: 0 auto;
      padding: 18px 0;
    }

    .header-row{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 16px;
    }

    .site-title{
      font-size: 1.15rem;
      letter-spacing: .2px;
    }

    .tools{
      display:flex;
      align-items:center;
      gap: 12px;
    }

    .toggle{
      appearance: none;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 1px 0 rgba(0,0,0,.04);
      min-height: 44px;
      min-width: 44px;
    }
    .toggle:hover{
      border-color: color-mix(in oklab, var(--border) 40%, var(--accent));
    }

    main{
      padding: 28px 0 44px;
    }

    .card{
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(18px, 3vw, 26px);
    }

    .intro{
      margin: 0 0 var(--gap-3);
      color: var(--muted);
    }

    .nudge{
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      background: color-mix(in oklab, var(--surface) 88%, var(--accent) 12%);
      margin-bottom: var(--gap-3);
    }

    .nudge legend{
      padding: 0 6px;
      color: var(--text);
      font-size: 1rem;
    }

    .check-row{
      display:flex;
      gap: 12px;
      align-items:flex-start;
      padding: 10px 0;
    }
    .check-row input[type="checkbox"]{
      width: 22px;
      height: 22px;
      margin-top: 3px;
      accent-color: var(--accent);
    }

    form{
      margin-top: var(--gap-3);
    }

    fieldset{
      border: 0;
      padding: 0;
      margin: 0 0 var(--gap-4);
    }

    .fieldset-title{
      margin: 0 0 var(--gap-2);
      font-size: 1.1rem;
      color: var(--text);
    }

    .hint{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: var(--gap-3);
    }

    .row-2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap-3);
    }

    @media (max-width: 680px){
      .row-2{
        grid-template-columns: 1fr;
      }
    }

    label{
      display:block;
      margin: 0 0 8px;
      color: var(--text);
    }

    input, select, textarea{
      width: 100%;
      border: 1px solid var(--border);
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      color: var(--text);
      padding: 14px 14px;
      border-radius: 14px;
      font-size: 1rem;
      min-height: 48px;
    }

    textarea{
      min-height: 140px;
      resize: vertical;
    }

    .required-note{
      color: var(--muted);
      font-size: 0.95rem;
      margin: 0 0 var(--gap-3);
    }

    .status{
      margin: 0 0 var(--gap-2);
      padding: 14px 16px;
      border-radius: 14px;
      border: 1px solid color-mix(in oklab, var(--border) 60%, transparent);
      background: color-mix(in oklab, var(--surface) 88%, var(--accent2) 12%);
      color: var(--text);
    }

    .status[hidden]{ display:none; }

    .btn-row{
      display:flex;
      flex-wrap: wrap;
      gap: 14px;
      align-items:center;
    }

    button{
      font: inherit;
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 14px 18px;
      cursor: pointer;
      min-height: 48px;
      background: var(--surface);
      color: var(--text);
    }

    .primary{
      border-color: color-mix(in oklab, var(--accent) 55%, var(--border));
      background: color-mix(in oklab, var(--accent) 18%, var(--surface));
    }
    .primary:hover{
      background: color-mix(in oklab, var(--accent) 26%, var(--surface));
    }

    .secondary:hover{
      background: color-mix(in oklab, var(--border) 18%, var(--surface));
    }

    footer{
      padding: 24px 0 40px;
      color: var(--muted);
    }

    .resources{
      margin-top: var(--gap-2);
      display:flex;
      flex-direction: column;
      gap: 10px;
    }

    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#main">Skip to main content</a>

  <header>
    <div class="wrap">
      <div class="header-row" role="banner">
        <div class="site-title">Email Georgie.Fehringer-Hicks@greenriver.edu</div>
        <div class="tools" aria-label="Header tools">
          <button id="themeToggle" class="toggle" type="button" aria-pressed="false">
            <span id="themeToggleText">Dark mode</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <div class="wrap">
      <div class="card">
        <p class="intro">
          Fill out this form, then select Generate email draft to open your email app with a pre-filled message.
          You can edit the email before you send it.
        </p>

        <fieldset class="nudge" aria-label="Quick check">
          <legend>Before you email</legend>
          <div class="check-row">
            <input id="n1" type="checkbox" />
            <label for="n1">I checked the module directions for this assignment.</label>
          </div>
          <div class="check-row">
            <input id="n2" type="checkbox" />
            <label for="n2">I can name the exact step where I got stuck.</label>
          </div>
          <div class="check-row">
            <input id="n3" type="checkbox" />
            <label for="n3">I included the assignment name and week or unit.</label>
          </div>
        </fieldset>

        <div id="status" class="status" aria-live="polite" hidden></div>

        <form id="emailForm" novalidate>
          <p class="required-note">Fields marked required must be filled in.</p>

          <fieldset>
            <div class="fieldset-title">Your info</div>

            <div class="grid">
              <div>
                <label for="studentName">Your name (required)</label>
                <input id="studentName" name="studentName" type="text" autocomplete="name" required />
              </div>

              <div class="row-2">
                <div>
                  <label for="studentEmail">Your student email (optional)</label>
                  <input id="studentEmail" name="studentEmail" type="email" autocomplete="email" inputmode="email" />
                </div>
                <div>
                  <label for="weekUnit">Week or unit (optional)</label>
                  <input id="weekUnit" name="weekUnit" type="text" />
                </div>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <div class="fieldset-title">Course and assignment</div>

            <div class="grid">
              <div class="row-2">
                <div>
                  <label for="course">Course (required)</label>
                  <select id="course" name="course" required>
                    <option value="" selected disabled>Select a course</option>
                    <option value="ENGL&101">ENGL&101</option>
                    <option value="ENGL117">ENGL117</option>
                    <option value="ENGL236">ENGL236</option>
                    <option value="ENGL248">ENGL248</option>
                    <option value="Both 101 & 117">Both 101 & 117</option>
                    <option value="Other">Other</option>
                  </select>
                  <p class="hint">If you pick Other, you will be asked for the course name.</p>
                </div>

                <div>
                  <label for="sectionNumber">Course section number (required)</label>
                  <input id="sectionNumber" name="sectionNumber" type="text" required />
                </div>
              </div>

              <div id="otherCourseWrap" hidden>
                <label for="otherCourse">Other course (required when course is Other)</label>
                <input id="otherCourse" name="otherCourse" type="text" />
              </div>

              <div>
                <label for="assignmentName">Assignment name (required)</label>
                <input id="assignmentName" name="assignmentName" type="text" required />
              </div>

              <div>
                <label for="subjectLine">Subject line (optional)</label>
                <input id="subjectLine" name="subjectLine" type="text" />
                <p class="hint">If you leave this blank, the page will create a subject line for you.</p>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <div class="fieldset-title">Your question</div>

            <div class="grid">
              <div>
                <label for="alreadyTried">What you already tried (optional)</label>
                <textarea id="alreadyTried" name="alreadyTried"></textarea>
              </div>

              <div>
                <label for="question">Your specific question (required)</label>
                <textarea id="question" name="question" required></textarea>
              </div>

              <div>
                <label for="workLink">Link to your work (optional)</label>
                <input id="workLink" name="workLink" type="url" inputmode="url" placeholder="https://example.com" />
              </div>
            </div>
          </fieldset>

          <div class="btn-row">
            <button class="primary" type="button" id="generateBtn">Generate email draft</button>
            <button class="secondary" type="reset" id="clearBtn">Clear form</button>
          </div>

          <p class="hint" style="margin-top: 14px;">
            If nothing opens after you select Generate email draft, your device may not have a default email app set.
          </p>
        </form>
      </div>

      <footer>
        <div>Resources</div>
        <div class="resources" aria-label="Resources links">
          <a href="https://www.greenriver.edu/students/academics/tutoring-resources/writing-reading-center.html">Writing Center</a>
          <a href="https://www.greenriver.edu/campus/campus-resources/counseling-services/index.html">Counseling</a>
          <a href="https://www.greenriver.edu/students/student-support-and-services/student-technology-support.html">Tech Support</a>
        </div>
      </footer>
    </div>
  </main>

  <script>
    (function(){
      const EMAIL_TO = "Georgie.Fehringer-Hicks@greenriver.edu";

      const form = document.getElementById("emailForm");
      const status = document.getElementById("status");

      const course = document.getElementById("course");
      const otherCourseWrap = document.getElementById("otherCourseWrap");
      const otherCourse = document.getElementById("otherCourse");

      const themeToggle = document.getElementById("themeToggle");
      const themeToggleText = document.getElementById("themeToggleText");

      function setStatus(message){
        if(!message){
          status.hidden = true;
          status.textContent = "";
          return;
        }
        status.hidden = false;
        status.textContent = message;
      }

      function normalizeSpace(s){
        return (s || "").toString().trim().replace(/\s+/g, " ");
      }

      function getCourseLabel(){
        const chosen = course.value;
        if(chosen === "Other"){
          return normalizeSpace(otherCourse.value);
        }
        return chosen;
      }

      function updateOtherCourseVisibility(){
        const isOther = course.value === "Other";
        otherCourseWrap.hidden = !isOther;
        otherCourse.required = isOther;
        if(!isOther){
          otherCourse.value = "";
        }
      }

      course.addEventListener("change", updateOtherCourseVisibility);
      updateOtherCourseVisibility();

      function missingFields(){
        const missing = [];

        const name = normalizeSpace(document.getElementById("studentName").value);
        if(!name) missing.push("your name");

        if(!course.value) missing.push("course");
        if(course.value === "Other"){
          if(!normalizeSpace(otherCourse.value)) missing.push("other course");
        }

        const section = normalizeSpace(document.getElementById("sectionNumber").value);
        if(!section) missing.push("course section number");

        const assignment = normalizeSpace(document.getElementById("assignmentName").value);
        if(!assignment) missing.push("assignment name");

        const question = normalizeSpace(document.getElementById("question").value);
        if(!question) missing.push("your specific question");

        return missing;
      }

      function buildSubject(){
        const subjectInput = normalizeSpace(document.getElementById("subjectLine").value);
        if(subjectInput) return subjectInput;

        const courseLabel = getCourseLabel();
        const section = normalizeSpace(document.getElementById("sectionNumber").value);
        const weekUnit = normalizeSpace(document.getElementById("weekUnit").value);
        const assignment = normalizeSpace(document.getElementById("assignmentName").value);

        const parts = [];
        parts.push(`[${courseLabel}]`);
        parts.push(`section ${section}`);
        if(weekUnit) parts.push(weekUnit);
        parts.push(`${assignment} question`);

        return normalizeSpace(parts.join(" "));
      }

      function buildBody(){
        const name = normalizeSpace(document.getElementById("studentName").value);
        const studentEmail = normalizeSpace(document.getElementById("studentEmail").value);
        const courseLabel = getCourseLabel();
        const section = normalizeSpace(document.getElementById("sectionNumber").value);
        const weekUnit = normalizeSpace(document.getElementById("weekUnit").value);
        const assignment = normalizeSpace(document.getElementById("assignmentName").value);
        const alreadyTried = normalizeSpace(document.getElementById("alreadyTried").value);
        const question = normalizeSpace(document.getElementById("question").value);
        const workLink = normalizeSpace(document.getElementById("workLink").value);

        const lines = [];
        lines.push("Hi Professor Fehringer-Hicks,");
        lines.push("");
        lines.push(`My name is ${name}.`);
        if(studentEmail) lines.push(`My email is ${studentEmail}.`);
        lines.push(`Course: ${courseLabel}, section ${section}.`);
        if(weekUnit) lines.push(`Week or unit: ${weekUnit}.`);
        lines.push(`Assignment: ${assignment}.`);
        if(alreadyTried){
          lines.push("");
          lines.push("What I already tried:");
          lines.push(alreadyTried);
        }
        lines.push("");
        lines.push("My question:");
        lines.push(question);
        if(workLink){
          lines.push("");
          lines.push(`Link to my work: ${workLink}`);
        }
        lines.push("");
        lines.push("Thank you,");
        lines.push(name);

        return lines.join("\n");
      }

      function openMailto(){
        const missing = missingFields();
        if(missing.length){
          setStatus("Please add: " + missing.join(", ") + ".");
          return;
        }
        setStatus("");

        const subject = buildSubject();
        const body = buildBody();

        const mailto = `mailto:${encodeURIComponent(EMAIL_TO)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        window.location.href = mailto;
      }

      document.getElementById("generateBtn").addEventListener("click", openMailto);

      form.addEventListener("reset", function(){
        setStatus("");
        window.setTimeout(function(){
          updateOtherCourseVisibility();
        }, 0);
      });

      /* Dark mode toggle with system default and localStorage preference */
      const THEME_KEY = "emailFormThemePreference"; // "light" | "dark" | null

      function systemPrefersDark(){
        return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      }

      function applyTheme(theme){
        document.documentElement.dataset.theme = theme;
        themeToggle.setAttribute("aria-pressed", theme === "dark" ? "true" : "false");
        themeToggleText.textContent = theme === "dark" ? "Light mode" : "Dark mode";
      }

      function loadTheme(){
        const saved = localStorage.getItem(THEME_KEY);
        if(saved === "light" || saved === "dark"){
          return saved;
        }
        return systemPrefersDark() ? "dark" : "light";
      }

      function toggleTheme(){
        const current = document.documentElement.dataset.theme || loadTheme();
        const next = current === "dark" ? "light" : "dark";
        localStorage.setItem(THEME_KEY, next);
        applyTheme(next);
      }

      applyTheme(loadTheme());

      if(window.matchMedia){
        const mq = window.matchMedia("(prefers-color-scheme: dark)");
        mq.addEventListener("change", function(){
          const saved = localStorage.getItem(THEME_KEY);
          if(saved !== "light" && saved !== "dark"){
            applyTheme(systemPrefersDark() ? "dark" : "light");
          }
        });
      }

      themeToggle.addEventListener("click", toggleTheme);
    })();
  </script>
</body>
</html>
